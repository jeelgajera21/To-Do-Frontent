@model IEnumerable<TaskModel>
<main>
    <div class="container container-fluid pt-3">
        <section class="section">
            <div class="row">
                <div class="col-lg-12">

                    <div class="row">
                        <h5 class="col">Task</h5>
                        <div class="text-start col">
                        </div>
                        <div class="text-end col">

                            <a class="text-end " asp-controller="Task" asp-action="AddTask">
                                <button class="btn btn-primary rounded-pill mb-3"><i class="bi bi-plus-lg"></i>&nbsp;Add Task</button>
                            </a>
                        </div>
                    </div>

                </div>
            </div>



            <!-- End Page Title -->


            <div class="mb-3">
        <input type="text" class="form-control" id="Search" placeholder="Search Any">
    </div>

            <table class="table table-hover table-header-fixed">
                <thead>
                    <tr>

                        
                        <th scope="col">Task Title</th>
                        <th scope="col">Description</th>
                        <th scope="col">Priority</th>
                        <th scope="col">Due Date</th>
                        <th scope="col">Status</th>
                        <th scope="col">CategoryName</th>
                        <th scope="col" class="text-center">Reminder</th>
                        <th scope="col" class="text-center">Actions</th>

                    </tr>
                </thead>
                <tbody id="Table">
                    @foreach (var i in Model)
                    {
                        <tr>
                            <script>
                                console.log("in task model");
                            </script>
                            
                            <td>@i.Title</td>
                            <td>@i.Description</td>

                            <td class="justify-content-center">
                                @if (i.Priority == 1)
                                {
                                    <span class="badge bg-danger">High</span>
                                }
                                else if (i.Priority == 2)
                                {
                                    <span class="badge bg-warning">Medium</span>
                                }
                                else
                                {
                                    <span class="badge bg-success">Low</span>
                                }
                            </td>

                            <td>@i.DueDate</td>
                            <td>@i.Status</td>
                            <td>@i.CategoryName</td>
                            <td class="text-center">
                                <!-- Edit Button -->
                                
                                    <!-- add reminder Button -->
                                    <a class="btn btn-success rounded-pill w-75"
                                       asp-controller="Reminder" asp-action="AddReminderTaskID" asp-route-RTaskID="@i.TaskID">
                                        Add 
                                    </a>
                                
                            </td>
                            <td class="text-center d-flex align-center justify-content-center">
                                <!-- Edit Button -->
                                
                                    <a class="btn btn-warning rounded-pill w-100 me-2" asp-controller="Task" asp-action="AddTask"
                                       asp-route-TaskID="@i.TaskID">
                                        Edit
                                    </a>
                                    

                                    <!-- Delete Button -->
                                    <a class="btn btn-danger rounded-pill w-100" asp-controller="Task" asp-action="DeleteTask"
                                       asp-route-TaskID="@i.TaskID"
                                       onclick="return confirm('Are you sure you want to delete this task?');">
                                        Delete
                                    </a>
                               
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </section>
    </div>
     
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#Search").on("keyup", function () {
                var value = $(this).val().toLowerCase().trim();

                $("#Table tr").each(function () {
                    let matchFound = false;

                    $(this).find("td").each(function () {
                        if ($(this).text().toLowerCase().includes(value)) {
                            matchFound = true;
                            return false; // Exit loop early if a match is found
                        }
                    });

                    $(this).toggle(matchFound);
                });
            });
        });
    </script>


</main>